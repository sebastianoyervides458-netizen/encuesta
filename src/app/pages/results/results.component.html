<div class="results-container">
  <div class="results-card">
        <div class="welcome-icons">
          <img src="/image.png" alt="Icon 1" />
          <img src="/logo_hu_color.png" alt="Icon 2"/>
          <img src="/UANL-Emblem.png" alt="Icon 3"/>
        </div>
        <div class="results-section">
          <!-- Risk Level Display -->
          <div class="risk-badge" [style.borderColor]="getRiskColor()">
            <div class="risk-label" [style.color]="getRiskColor()">{{ getRiskLabel() }}</div>
          </div>

          <!-- Recommendation -->
          <div class="recommendation-box" [style.borderLeftColor]="getRiskColor()">
            <h2 class="recommendation-title">Recomendación Médica</h2>
            <p class="recommendation-text">{{ riskAssessment?.recommendation }}</p>
          </div>

          <!-- Contact Form for Moderate and High Risk -->
          <div *ngIf="showContactForm && !contactSubmitted" class="contact-section">
            <h3 class="contact-title">Información de Contacto</h3>
            <p class="contact-subtitle">
              se comunicaran con usted para proporcionarle orientación adicional
            </p>

            <form class="contact-form" #contactForm="ngForm" (ngSubmit)="submitContactInfo()">
              <div class="form-group">
                <label for="email">Correo Electrónico</label>
                <input
                  type="email"
                  id="email"
                  name="email"
                  placeholder="tu@email.com"
                  [(ngModel)]="contactInfo.email"
                  required
                  email
                  autocomplete="email"
                />
                <small class="error" *ngIf="contactForm.submitted && !contactForm.controls['email']?.valid">
                  Ingresa un correo válido.
                </small>
              </div>

              <div class="form-group">
                <label for="phone">Teléfono</label>
                <input
                  type="tel"
                  id="phone"
                  name="phone"
                  placeholder="+34 123 456 789"
                  [(ngModel)]="contactInfo.phone"
                  required
                  autocomplete="tel"
                />
                <small class="error" *ngIf="contactForm.submitted && !contactForm.controls['phone']?.valid">
                  Ingresa tu teléfono.
                </small>
              </div>

              <label class="form-group checkbox">
                <input type="checkbox" name="consentimiento" [(ngModel)]="consentimiento" required />
                Acepto ser contactado
              </label>

              <div class="error" *ngIf="errorMsg">{{ errorMsg }}</div>

              <button type="submit" class="submit-contact-btn" [disabled]="contactForm.invalid || loading">
                {{ loading ? 'Enviando…' : 'Enviar Información' }}
              </button>
            </form>
          </div>

          <div *ngIf="contactSubmitted" class="confirmation-message">
            <div class="confirmation-icon">✓</div>
            <h3>Información Enviada</h3>
            <p>Un médico se comunicará con usted en breve</p>
          </div>

          <div class="action-buttons">
            <button class="reset-btn" (click)="startOver()">Realizar Nueva Evaluación</button>
          </div>
        </div>
  </div>
    
</div>

